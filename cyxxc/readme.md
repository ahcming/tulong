## cyxxc
微信小游戏 - 成语小秀才

程序的目标是: 通过程序自动完成题目
后期的目标是: 通过程序来设计题目, 有难度的区别

原版方案是 `adb shell + tesseract-ocr`来识别题目, 结果`tesseract-ocr`识别效果太差
后来的方案是 通过`uiautomator2`来进行元素定位, 但是小程序的控制都是ImageView, 还未深入了解如何获取text, 

当前还是只实现了最核心的功能, 设计题目数据结构, 候选词, 词库, 输出答案

输入 -- 程序自动获取当前小程序题目内容, 方格位置, 候选词内容 --> 然后转换成题目
输出 -- 仿真操作APP, 完成游戏当前关卡

后续再完善

### 词库结构设计

成语词库大概有47848个, 对每个成语建立一个索引

假设一个成语为ABCD, 则对应的索引有4条 {"A_1": "ABCD", "B_2": "ABCD", "C_3": "ABCD", "D_4": "ABCD"}

分析完全部成语库之后, 整个索引大概是如下结构
{
    "A_1": ["AXYZ", "AXYZ",...],
    "A_2": ["XAYZ", "XAYZ",...],
    "A_3": ["XYAZ", "XYAZ",...],
    "A_4": ["XYZA", "XYZA",...],
    "B_1": ["BXYZ", "BXYZ",...],
    "B_2": ["XBYZ", "XBYZ",...],
}

### 候选词设计

词:数量, 如下实例

{"A":1, "B":2, "C":1, ...}

### 题目设计

题目是一个`9x9`的正方形区域, 每一个格子有3种情况, 

- 没有字用'#'
- 待填入用'X'
- 题面上已经确定的字, 就用本来的内容

 假设题面如下: 

```shell
X # # # 
X # # #
望 X X X
X # # #
```

输入的时候以一维数组存储, 下标即坐标

每个元素为一个对象, 对象结构如下:
```js
{
    "text": "V",
    "status": True      # 表示是否确定
}
```

### 解法过程

- 遍历题面上的每个字, 获取key, 比如上面题面的望字, 就有2个key, "望_1", "望_3"
- 分别取出"望_1"在词库中的所有可用词
- 然后遍历每个可用词在候选列表中是否都存在
- 如果经过过滤之后, "望_1"的可用词数量有以下几种可能
    + 只有一个: bingo, 这道题目只能填这个了
    + 有多个: 那就继续看其它词, 之后再回来看
    + 0个: 题目有问题 or 词库不够全
- next 词